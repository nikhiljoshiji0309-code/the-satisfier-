<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nikjosh0309 - Living Universe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
    margin:0;
    padding:0;
    width:100%;
    height:100%;
    overflow:hidden;
    background:#050505;
    font-family:Arial Black,sans-serif;
}
canvas{display:block}

/* UI */
#ui{
    position:absolute;
    top:20px;
    left:20px;
    z-index:100;
    color:white;
}
#ui p{
    font-size:11px;
    color:#00ffcc;
}

/* Menu */
.menu{
    position:absolute;
    bottom:40px;
    left:50%;
    transform:translateX(-50%);
    display:flex;
    gap:8px;
    z-index:100;
}
button{
    padding:12px 18px;
    border:1px solid #00ffcc;
    background:rgba(0,0,0,.8);
    color:white;
    cursor:pointer;
    border-radius:5px;
}
button.active,button:hover{
    background:#00ffcc;
    color:black;
}

/* Game overlay */
.gameOverlay{
    position:absolute;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    background:rgba(0,0,0,.85);
    color:#00ffcc;
    z-index:200;
    text-align:center;
}

.copyright{
    position:absolute;
    bottom:10px;
    right:15px;
    font-size:11px;
    opacity:.5;
    letter-spacing:2px;
    color:#00ffcc;
}
</style>
</head>

<body>

<div id="ui">
    <h2 id="themeLabel">THEME: SPACE</h2>
    <p>MOVE â€¢ CLICK = SHOCKWAVE</p>
    <p id="scoreUI"></p>
    <p id="bestUI"></p>
</div>

<div class="menu">
    <button onclick="changeTheme('space',this)" class="active">SPACE</button>
    <button onclick="changeTheme('lava',this)">LAVA</button>
    <button onclick="changeTheme('electric',this)">ELECTRIC</button>
    <button onclick="changeTheme('ghost',this)">GHOST</button>
    <button onclick="startGame()">GAME</button>
</div>

<div class="gameOverlay" id="gameOver">
    <h1>âš¡ GAME OVER</h1>
    <p id="scoreText"></p>
    <p id="bestText"></p>
    <button onclick="startGame()">RESTART</button>
</div>

<div class="copyright">ENGINE BY: nikjosh0309</div>

<canvas id="canvas"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
resize();addEventListener("resize",resize);
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}

/* INPUT */
let mouse={x:innerWidth/2,y:innerHeight/2};
let isPressing=false;
addEventListener("mousemove",e=>{mouse.x=e.x;mouse.y=e.y});
addEventListener("mousedown",()=>isPressing=true);
addEventListener("mouseup",()=>isPressing=false);

/* VISUAL MODE (UNCHANGED) */
let particles=[];
let currentTheme="space";
let gameMode=false;

const themeColors={
    space:"#00ffff",
    lava:"#ff5500",
    electric:"#ffff00",
    ghost:"#bbbbff"
};

class Particle{
    constructor(x,y){
        this.x=x;this.y=y;
        this.size=Math.random()*6+4;
        this.vx=Math.random()*4-2;
        this.vy=Math.random()*4-2;
    }
    update(){
        if(gameMode) return;
        let dx=mouse.x-this.x;
        let dy=mouse.y-this.y;
        let d=Math.hypot(dx,dy)||1;
        this.vx+=dx/d*.02;
        this.vy+=dy/d*.02;
        if(isPressing && d<120){
            this.vx-=dx/d*3;
            this.vy-=dy/d*3;
        }
        this.x+=this.vx;this.y+=this.vy;
        if(this.x<0)this.x=canvas.width;
        if(this.x>canvas.width)this.x=0;
        if(this.y<0)this.y=canvas.height;
        if(this.y>canvas.height)this.y=0;
    }
    draw(){
        ctx.shadowBlur=20;
        ctx.shadowColor=themeColors[currentTheme];
        ctx.fillStyle=themeColors[currentTheme];
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
        ctx.fill();
        ctx.shadowBlur=0;
    }
}

/* ================= GAME MODE (ONLY ADDITIONS HERE) ================= */

class Player{
    constructor(){
        this.x=mouse.x;
        this.y=mouse.y;
        this.r=12;
    }
    update(){
        this.x+=(mouse.x-this.x)*.2;
        this.y+=(mouse.y-this.y)*.2;
    }
    draw(){
        ctx.fillStyle="#00ffcc";
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
        ctx.fill();
    }
}

class Enemy{
    constructor(boss=false){
        this.boss=boss;
        this.x=Math.random()*canvas.width;
        this.y=Math.random()*canvas.height;
        this.r=boss?26:10;
        this.speed=boss?2.2:Math.random()*1.5+1;
        this.hp=boss?2:1;
    }
    update(){
        let dx=player.x-this.x;
        let dy=player.y-this.y;
        let d=Math.hypot(dx,dy)||1;
        this.x+=dx/d*this.speed;
        this.y+=dy/d*this.speed;
    }
    draw(){
        ctx.fillStyle=this.boss?"#ff00ff":"#ff0044";
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.r,0,Math.PI*2);
        ctx.fill();
    }
}

let player;
let enemies=[];
let score=0;
let spawnTimer=0;
let bossTimer=0;
let bestScore=localStorage.getItem("bestScore")||0;

function startGame(){
    gameMode=true;
    currentTheme="electric";
    particles=[];
    enemies=[];
    player=new Player();
    score=0;
    spawnTimer=0;
    bossTimer=0;
    document.getElementById("gameOver").style.display="none";
}

function endGame(){
    gameMode=false;
    if(score>bestScore){
        bestScore=Math.floor(score);
        localStorage.setItem("bestScore",bestScore);
    }
    scoreText.innerText=`Survived: ${Math.floor(score)} sec`;
    bestText.innerText=`Best: ${bestScore} sec`;
    document.getElementById("gameOver").style.display="flex";
}

function changeTheme(t,btn){
    gameMode=false;
    currentTheme=t;
    particles=[];
    document.querySelectorAll("button").forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");
    themeLabel.innerText="THEME: "+t.toUpperCase();
}

/* LOOP */
function animate(){
    ctx.fillStyle="rgba(0,0,0,.3)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    if(!gameMode){
        if(Math.random()<.3)particles.push(new Particle(mouse.x,mouse.y));
        particles.forEach(p=>{p.update();p.draw()});
    }

    if(gameMode){
        score+=0.016;
        scoreUI.innerText=`TIME: ${Math.floor(score)}`;
        bestUI.innerText=`BEST: ${bestScore}`;

        spawnTimer++;
        bossTimer++;

        if(spawnTimer>40){
            enemies.push(new Enemy());
            spawnTimer=0;
        }

        if(bossTimer>1800){
            enemies.push(new Enemy(true)); // ðŸ‘¹ BOSS
            bossTimer=0;
        }

        player.update();
        player.draw();

        enemies.forEach((e,i)=>{
            e.update();
            e.draw();
            if(Math.hypot(e.x-player.x,e.y-player.y)<e.r+player.r){
                endGame();
            }
        });
    }

    requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>

