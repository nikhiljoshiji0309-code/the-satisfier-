<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nikjosh0309 - Living Universe</title>

<style>
body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: #050505;
    font-family: 'Arial Black', sans-serif;
}
canvas { display: block; }

#ui {
    position: absolute;
    top: 20px;
    left: 20px;
    color: white;
    z-index: 100;
}

.menu {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    z-index: 100;
}

button {
    padding: 12px 18px;
    border: 1px solid #00ffcc;
    background: rgba(0,0,0,0.8);
    color: white;
    cursor: pointer;
    border-radius: 5px;
}

button:hover, .active {
    background: #00ffcc;
    color: black;
}

.gameOverlay {
    position: absolute;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    background: rgba(0,0,0,0.8);
    color: #00ffcc;
    z-index: 200;
    text-align: center;
}

.copyright {
    position: absolute;
    bottom: 10px;
    right: 15px;
    font-size: 11px;
    opacity: 0.5;
    letter-spacing: 2px;
    color: #00ffcc;
}
</style>
</head>

<body>

<div id="ui">
    <h2 id="themeLabel">THEME: SPACE</h2>
    <p style="font-size:11px;color:#00ffcc">MOVE ‚Ä¢ CLICK = SHOCKWAVE</p>
</div>

<div class="menu">
    <button onclick="changeTheme('space',this)" class="active">SPACE</button>
    <button onclick="changeTheme('lava',this)">LAVA</button>
    <button onclick="changeTheme('electric',this)">ELECTRIC</button>
    <button onclick="changeTheme('ghost',this)">GHOST</button>
    <button onclick="startGame()">GAME</button>
</div>

<div class="gameOverlay" id="gameOver">
    <h1>‚ö° GAME OVER</h1>
    <p id="scoreText"></p>
    <button onclick="startGame()">RESTART</button>
</div>

<div class="copyright">ENGINE BY: nikjosh0309</div>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let particles = [];
let currentTheme = "space";
let isPressing = false;
let mouse = { x: innerWidth/2, y: innerHeight/2 };

// GAME STATE
let gameMode = false;
let player, score = 0, spawnRate = 60;

class Player {
    constructor() {
        this.x = mouse.x;
        this.y = mouse.y;
        this.radius = 14;
    }
    update() {
        this.x += (mouse.x - this.x) * 0.15;
        this.y += (mouse.y - this.y) * 0.15;
    }
    draw() {
        ctx.shadowBlur = 30;
        ctx.shadowColor = "#00ffff";
        ctx.fillStyle = "#00ffff";
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);
        ctx.fill();
        ctx.shadowBlur = 0;
    }
}

class Particle {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.size = Math.random()*6+4;
        this.vx = Math.random()*4-2;
        this.vy = Math.random()*4-2;
    }

    update() {
        if (gameMode) {
            // ENEMY AI üß†
            let dx = player.x - this.x;
            let dy = player.y - this.y;
            let d = Math.hypot(dx, dy) || 1;
            this.vx += (dx/d)*0.15;
            this.vy += (dy/d)*0.15;
        }

        if (isPressing) {
            // SHOCKWAVE
            let dx = this.x - mouse.x;
            let dy = this.y - mouse.y;
            let d = Math.hypot(dx, dy) || 1;
            if (d < 120) {
                this.vx += (dx/d)*3;
                this.vy += (dy/d)*3;
            }
        }

        this.x += this.vx;
        this.y += this.vy;

        if (this.x < 0) this.x = canvas.width;
        if (this.x > canvas.width) this.x = 0;
        if (this.y < 0) this.y = canvas.height;
        if (this.y > canvas.height) this.y = 0;
    }

    draw() {
        ctx.shadowBlur = 20;
        ctx.shadowColor = "#00ffff";
        ctx.fillStyle = "#00ffff";
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
        ctx.fill();
        ctx.shadowBlur = 0;
    }
}

function startGame() {
    gameMode = true;
    currentTheme = "electric";
    particles = [];
    player = new Player();
    score = 0;
    spawnRate = 60;
    document.getElementById("gameOver").style.display = "none";
}

function endGame() {
    gameMode = false;
    document.getElementById("scoreText").innerText =
        `You survived ${Math.floor(score)} seconds`;
    document.getElementById("gameOver").style.display = "flex";
}

function changeTheme(t, btn) {
    gameMode = false;
    currentTheme = t;
    particles = [];
    document.querySelectorAll("button").forEach(b => b.classList.remove("active"));
    if (btn) btn.classList.add("active");
}

addEventListener("mousemove", e => {
    mouse.x = e.x;
    mouse.y = e.y;
});

addEventListener("mousedown", () => isPressing = true);
addEventListener("mouseup", () => isPressing = false);

function animate() {
    ctx.fillStyle = "rgba(0,0,0,0.3)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    if (gameMode) {
        score += 0.016;

        if (Math.random() < 1/spawnRate) {
            particles.push(new Particle(
                Math.random()*canvas.width,
                Math.random()*canvas.height
            ));
            spawnRate = Math.max(15, spawnRate - 0.5); // difficulty ‚Üë
        }

        player.update();
        player.draw();

        particles.forEach((p,i)=>{
            p.update();
            p.draw();

            // COLLISION ‚ò†Ô∏è
            let dx = p.x - player.x;
            let dy = p.y - player.y;
            if (Math.hypot(dx,dy) < p.size + player.radius) {
                endGame();
            }
        });

        ctx.fillStyle = "#00ffcc";
        ctx.fillText(`TIME: ${Math.floor(score)}`, 20, 80);
    }

    else {
        particles.forEach(p=>{
            p.update();
            p.draw();
        });
    }

    requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
