<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Electric Survival ‚Äî Living Universe</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
    margin:0;padding:0;overflow:hidden;
    background:#02020a;
    font-family:Arial Black,sans-serif;
    color:white;
}
canvas{display:block}

/* HUD */
#hud{
    position:fixed;
    top:12px;left:12px;
    z-index:10;
    font-size:14px;
    color:#00ffff;
}
#hud span{display:block;margin-bottom:5px}

/* Screens */
.overlay{
    position:fixed;inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:radial-gradient(circle,#000 0%,#02020a 70%);
    z-index:20;
}
.hidden{display:none}

.panel{
    border:1px solid #00ffff;
    padding:24px;
    background:rgba(0,0,0,0.7);
    max-width:340px;
    text-align:center;
}
.panel h1{margin:0 0 10px;color:#00ffff}
.panel p{font-size:12px;opacity:.85}
.panel button{
    margin-top:15px;
    padding:10px 18px;
    border:1px solid #00ffff;
    background:transparent;
    color:#00ffff;
    cursor:pointer;
}
.panel button:hover{background:#00ffff;color:#000}
</style>
</head>

<body>
<canvas id="c"></canvas>

<div id="hud">
    <span>‚ö° SCORE: <b id="score">0</b></span>
    <span>üèÜ BEST: <b id="best">0</b></span>
    <span id="status"></span>
</div>

<div id="start" class="overlay">
    <div class="panel">
        <h1>ELECTRIC SURVIVAL</h1>
        <p>
            You are a sentient energy core.<br><br>
            ‚ö™ Chasers hunt you<br>
            üî¥ Speeders rush you<br>
            üü£ Orbiters trap you<br><br>
            Collect power-ups.<br>
            One hit = collapse.
        </p>
        <button onclick="startGame()">‚ö° ENTER</button>
    </div>
</div>

<div id="gameover" class="overlay hidden">
    <div class="panel">
        <h1>CORE DESTROYED</h1>
        <p id="finalScore"></p>
        <button onclick="restart()">RESTART</button>
    </div>
</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
resize(); window.addEventListener("resize",resize);
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}

/* AUDIO */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
const audio = new AudioCtx();
function sound(f,t="sawtooth",v=0.08,d=0.15){
    const o=audio.createOscillator(),g=audio.createGain();
    o.type=t;o.frequency.value=f;g.gain.value=v;
    g.gain.exponentialRampToValueAtTime(0.0001,audio.currentTime+d);
    o.connect(g);g.connect(audio.destination);
    o.start();o.stop(audio.currentTime+d);
}

/* GAME STATE */
let running=false;
let enemies=[], powerups=[];
let score=0;
let best=localStorage.getItem("best")||0;
document.getElementById("best").textContent=best;

const player={x:innerWidth/2,y:innerHeight/2,r:10};
let difficulty=1;
let shield=false;
let slowTime=0;

/* INPUT */
window.addEventListener("mousemove",e=>{player.x=e.clientX;player.y=e.clientY});
window.addEventListener("touchmove",e=>{
    player.x=e.touches[0].clientX;
    player.y=e.touches[0].clientY;
},{passive:false});
window.addEventListener("mousedown",shockwave);
window.addEventListener("touchstart",shockwave);

function shockwave(){
    if(!running)return;
    sound(120,"square",0.12,0.2);
    enemies.forEach(e=>{
        const dx=e.x-player.x,dy=e.y-player.y;
        const d=Math.hypot(dx,dy)||1;
        e.vx+=dx/d*5;
        e.vy+=dy/d*5;
    });
}

/* ENEMY SPAWN */
function spawnEnemy(){
    const type=Math.random();
    let e={x:0,y:0,vx:0,vy:0,r:6,type:"chaser"};
    const edge=Math.floor(Math.random()*4);
    if(edge===0){e.x=0;e.y=Math.random()*canvas.height}
    if(edge===1){e.x=canvas.width;e.y=Math.random()*canvas.height}
    if(edge===2){e.x=Math.random()*canvas.width;e.y=0}
    if(edge===3){e.x=Math.random()*canvas.width;e.y=canvas.height}

    if(type>0.7)e.type="orbiter";
    else if(type>0.4)e.type="speeder";

    enemies.push(e);
}

/* POWERUPS */
function spawnPower(){
    const types=["shield","slow","burst"];
    powerups.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        r:8,
        type:types[Math.floor(Math.random()*3)]
    });
}

/* LOOP */
function loop(){
    if(!running)return;

    ctx.fillStyle="rgba(0,0,25,0.35)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Player
    ctx.fillStyle=shield?"#00ff88":"#00ffff";
    ctx.beginPath();
    ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
    ctx.fill();

    difficulty+=0.001;
    if(Math.random()<0.02*difficulty)spawnEnemy();
    if(Math.random()<0.002)spawnPower();

    // Powerups
    powerups.forEach((p,i)=>{
        ctx.fillStyle=
            p.type==="shield"?"#00ff88":
            p.type==="slow"?"#0088ff":"#ffcc00";
        ctx.beginPath();
        ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
        ctx.fill();

        if(Math.hypot(p.x-player.x,p.y-player.y)<p.r+player.r){
            sound(500,"sine",0.15,0.2);
            if(p.type==="shield")shield=true;
            if(p.type==="slow")slowTime=600;
            if(p.type==="burst")shockwave();
            powerups.splice(i,1);
        }
    });

    // Enemies
    for(let i=enemies.length-1;i>=0;i--){
        const e=enemies[i];
        const dx=player.x-e.x,dy=player.y-e.y;
        const d=Math.hypot(dx,dy)||1;
        let speed=0.06*difficulty;

        if(e.type==="speeder")speed*=2;
        if(e.type==="orbiter"){
            e.vx+=(-dy/d)*0.15;
            e.vy+=(dx/d)*0.15;
        }

        if(slowTime>0)speed*=0.4;

        e.vx+=dx/d*speed;
        e.vy+=dy/d*speed;
        e.x+=e.vx;e.y+=e.vy;

        ctx.fillStyle=
            e.type==="speeder"?"#ff4444":
            e.type==="orbiter"?"#bb66ff":"#ffffff";
        ctx.beginPath();
        ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
        ctx.fill();

        if(d<e.r+player.r){
            if(shield){
                shield=false;
                sound(300,"square",0.2,0.3);
                enemies.splice(i,1);
            }else{
                endGame();return;
            }
        }
    }

    if(slowTime>0)slowTime--;
    document.getElementById("status").textContent=
        shield?"üü¢ SHIELD":slowTime>0?"üîµ SLOW":"";

    score++;
    document.getElementById("score").textContent=score;
    requestAnimationFrame(loop);
}

/* FLOW */
function startGame(){
    audio.resume();
    document.getElementById("start").classList.add("hidden");
    running=true;
    sound(400,"sine",0.15,0.3);
    loop();
}
function endGame(){
    running=false;
    sound(60,"sawtooth",0.2,0.5);
    document.getElementById("gameover").classList.remove("hidden");
    document.getElementById("finalScore").innerHTML=`Survived <b>${score}</b> cycles`;
    if(score>best){
        best=score;
        localStorage.setItem("best",best);
        document.getElementById("best").textContent=best;
    }
}
function restart(){
    enemies=[];powerups=[];
    score=0;difficulty=1;
    shield=false;slowTime=0;
    document.getElementById("gameover").classList.add("hidden");
    running=true;
    loop();
}
</script>
</body>
</html>
